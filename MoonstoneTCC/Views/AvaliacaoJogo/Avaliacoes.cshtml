@model IEnumerable<MoonstoneTCC.Models.AvaliacaoJogo>
@{
    ViewData["Title"] = "Meus Likes & Dislikes";
}

<div class="container mt-5 text-white">
    <h2 class="fw-bold mb-4">
        <i class="fas fa-thumbs-up me-2 text-success"></i> Jogos que Curti
    </h2>

    @if (!Model.Any(a => a.Gostou == true))
    {
        <div class="alert alert-info carousel-container text-center">
            <i class="fas fa-info-circle me-2"></i>
            Você ainda não curtiu nenhum jogo.<br />
            <a href="/Jogo" class="btn btn-outline-primary mt-3">
                <i class="fas fa-gamepad me-2"></i> Ver todos os jogos
            </a>
        </div>
    }

    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4 mb-5">
        @foreach (var a in Model.Where(x => x.Gostou == true))
        {
            var jogo = a.Jogo;

            <div class="col">
                <div class="carousel-container h-100 d-flex flex-column p-3 rounded-4 shadow-lg border border-success">
                    <div class="text-center mb-3">
                        <img src="@jogo.ImagemThumbnailUrl"
                             alt="@jogo.Nome"
                             class="img-fluid rounded shadow"
                             style="max-height: 200px; object-fit: cover;" />
                    </div>

                    <div class="text-white text-center flex-grow-1">
                        <h5 class="fw-bold">@jogo.Nome</h5>
                        <p class="mb-1">
                            Plataforma:
                            <span class="badge bg-secondary">@jogo.Plataformas</span>
                        </p>
                        <p class="fw-semibold text-success">R$ @jogo.Preco.ToString("F2")</p>
                    </div>

                    <div class="mt-3 d-grid gap-2">
                        <a asp-controller="CarrinhoCompra" asp-action="ComprarAgora" asp-route-jogoId="@jogo.JogoId"
                           class="btn btn-success d-flex justify-content-center align-items-center">
                            <i class="fas fa-bolt me-2"></i> Comprar Agora
                        </a>

                        <a asp-controller="CarrinhoCompra" asp-action="AdicionarItemNoCarrinhoCompra" asp-route-jogoId="@jogo.JogoId"
                           class="btn btn-outline-light d-flex justify-content-center align-items-center">
                            <i class="fas fa-cart-plus me-2"></i> Adicionar ao Carrinho
                        </a>

                        <a asp-controller="Jogo" asp-action="Details" asp-route-jogoId="@jogo.JogoId"
                           class="btn btn-primary d-flex justify-content-center align-items-center">
                            <i class="fas fa-eye me-2"></i> Ver Detalhes
                        </a>
                        <form asp-controller="AvaliacaoJogo" asp-action="RemoverAvaliacaoView" asp-route-jogoId="@jogo.JogoId" method="post">
                            <button type="submit" class="btn btn-outline-danger d-flex justify-content-center align-items-center">
                                <i class="fas fa-times me-2"></i> Remover @((a.Gostou == true) ? "Like" : "Dislike")
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        }
    </div>

    <h2 class="fw-bold mb-4">
        <i class="fas fa-thumbs-down me-2 text-danger"></i> Jogos que Não Curti
    </h2>

    @if (!Model.Any(a => a.Gostou == false))
    {
        <div class="alert alert-info carousel-container text-center">
            <i class="fas fa-info-circle me-2"></i>
            Você ainda não marcou nenhum jogo como "não gostei".
        </div>
    }

    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
        @foreach (var a in Model.Where(x => x.Gostou == false))
        {
            var jogo = a.Jogo;

            <div class="col">
                <div class="carousel-container h-100 d-flex flex-column p-3 rounded-4 shadow-lg border border-danger">
                    <div class="text-center mb-3">
                        <img src="@jogo.ImagemThumbnailUrl"
                             alt="@jogo.Nome"
                             class="img-fluid rounded shadow"
                             style="max-height: 200px; object-fit: cover;" />
                    </div>

                    <div class="text-white text-center flex-grow-1">
                        <h5 class="fw-bold">@jogo.Nome</h5>
                        <p class="mb-1">
                            Plataforma:
                            <span class="badge bg-secondary">@jogo.Plataformas</span>
                        </p>
                        <p class="fw-semibold text-success">R$ @jogo.Preco.ToString("F2")</p>
                    </div>

                    <div class="mt-3 d-grid gap-2">
                        <a asp-controller="CarrinhoCompra" asp-action="ComprarAgora" asp-route-jogoId="@jogo.JogoId"
                           class="btn btn-success d-flex justify-content-center align-items-center">
                            <i class="fas fa-bolt me-2"></i> Comprar Agora
                        </a>

                        <a asp-controller="CarrinhoCompra" asp-action="AdicionarItemNoCarrinhoCompra" asp-route-jogoId="@jogo.JogoId"
                           class="btn btn-outline-light d-flex justify-content-center align-items-center">
                            <i class="fas fa-cart-plus me-2"></i> Adicionar ao Carrinho
                        </a>

                        <a asp-controller="Jogo" asp-action="Details" asp-route-jogoId="@jogo.JogoId"
                           class="btn btn-primary d-flex justify-content-center align-items-center">
                            <i class="fas fa-eye me-2"></i> Ver Detalhes
                        </a>
                        <form asp-controller="AvaliacaoJogo" asp-action="RemoverAvaliacaoView" asp-route-jogoId="@jogo.JogoId" method="post">
                            <button type="submit" class="btn btn-outline-danger d-flex justify-content-center align-items-center">
                                <i class="fas fa-times me-2"></i> Remover @((a.Gostou == true) ? "Like" : "Dislike")
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
