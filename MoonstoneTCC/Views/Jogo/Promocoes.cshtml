@model List<MoonstoneTCC.Models.Jogo>
@{
    ViewData["Title"] = "🔥 Jogos em Promoção";
}

<div class="container mt-4">
    <h2 class="text-light mb-4"><i class="fas fa-fire text-danger me-2"></i> Jogos em Promoção</h2>

    @if (!Model.Any())
    {
        <p class="text-muted">Nenhum jogo em promoção no momento.</p>
    }
    else
    {
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            @foreach (var jogo in Model)
            {
                <div class="col">
                    <div class="card h-100 custom-card-roxo text-white border border-purple shadow-sm">
                        <img src="@(!string.IsNullOrEmpty(jogo.ImagemThumbnailUrl) ? jogo.ImagemThumbnailUrl : (!string.IsNullOrEmpty(jogo.ImagemUrl) ? jogo.ImagemUrl : "/images/sem-imagem.png"))"
                             class="card-img-top"
                             style="height: 200px; object-fit: cover;"
                             alt="@jogo.Nome" />
                        <div class="card-body d-flex flex-column justify-content-between">
                            <div class="text-start px-2 pt-2">
                                <h5 class="card-title fw-bold text-white mb-1">@jogo.Nome</h5>

                                <p class="mb-1">
                                    <span class="badge bg-dark text-white border border-purple">@jogo.Plataformas</span>
                                </p>

                                <p class="mb-1">
                                    <del class="text-muted">R$ @jogo.Preco.ToString("F2")</del><br />
                                    <span class="text-warning fw-bold">R$ @jogo.PrecoPromocional?.ToString("F2")</span>
                                    <span class="badge bg-success ms-2">-@jogo.PorcentagemDesconto%</span>
                                </p>
                            </div>

                            <div class="mt-3 d-flex justify-content-between align-items-center flex-wrap gap-2">
                                <a class="btn btn-outline-light btn-sm" href="@Url.Action("Details", "Jogo", new { jogoId = jogo.JogoId })">
                                    <i class="fas fa-info-circle me-1"></i> Ver Detalhes
                                </a>

                                <!-- Adicionar ao Carrinho -->
                                <a asp-controller="CarrinhoCompra" asp-action="AdicionarItemNoCarrinhoCompra" asp-route-jogoId="@jogo.JogoId"
                                   class="btn btn-outline-light d-flex justify-content-center align-items-center">
                                    <i class="fas fa-cart-plus me-2"></i> Adicionar ao Carrinho
                                </a>

                                <a asp-controller="CarrinhoCompra" asp-action="ComprarAgora" asp-route-jogoId="@jogo.JogoId" class="btn btn-success d-flex justify-content-center align-items-center">
                                    <i class="fas fa-bolt me-2"></i> Comprar Agora
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>


<style>
    .custom-card-roxo {
        background-color: #2b1b3a;
        transition: background-color 0.3s ease;
    }

        .custom-card-roxo:hover {
            background-color: #3b2650;
        }

    .text-purple {
        color: #9d3ce6;
    }

    .bg-purple {
        background-color: #7e00c8;
        color: #fff;
    }

    .border-purple {
        border-color: #7e00c8 !important;
    }

    .btn-purple {
        background-color: #7e00c8;
        color: white;
        border: none;
    }

        .btn-purple:hover {
            background-color: #9d3ce6;
        }
</style>
